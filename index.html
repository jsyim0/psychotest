<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ â€” E/S/O/C ì„±í–¥ ë¶„ì„</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  :root {
    --accent: #6366f1;
    --bg-light: linear-gradient(120deg, #eef2ff, #e0e7ff);
    --card-light: #ffffff;
  }
  body {
    font-family: Inter, "Pretendard", "Noto Sans KR", system-ui;
    background: var(--bg-light);
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
  }
  .card {
    max-width: 900px;
    width: 100%;
    background: var(--card-light);
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
  }
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }
  header h1 {
    margin: 0;
    font-size: 1.3rem;
    background: linear-gradient(45deg, #4f46e5, #8b5cf6);
    -webkit-background-clip: text;
    color: transparent;
  }
  .btn {
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 10px;
    padding: 8px 12px;
    cursor: pointer;
  }
  main {
    display: flex;
    gap: 18px;
    flex-wrap: wrap;
  }
  .quiz {
    flex: 1 1 360px;
    min-width: 280px;
  }
  .start-box {
    border-radius: 12px;
    padding: 16px;
    background: white;
    box-shadow: 0 6px 18px rgba(2, 6, 23, 0.06);
  }
  .trait-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-top: 14px;
  }
  .trait {
    border-radius: 12px;
    padding: 12px;
    text-align: center;
    font-size: 0.9rem;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
  }
  .trait strong {
    display: block;
    font-size: 1.3rem;
    margin-bottom: 4px;
  }
  .E { background: #eff6ff; color: #1d4ed8; }
  .S { background: #f0fdf4; color: #15803d; }
  .O { background: #fff7ed; color: #c2410c; }
  .C { background: #f5f3ff; color: #6d28d9; }
  .question-card, .result-card {
    display: none;
    background: white;
    border-radius: 12px;
    padding: 14px;
    box-shadow: 0 6px 18px rgba(2, 6, 23, 0.06);
  }
  .choices {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .choice {
    padding: 10px;
    border-radius: 8px;
    background: #f8fafc;
    cursor: pointer;
  }
  .choice:hover { background: #eef2ff; }
  .result-detail {
    margin-top: 10px;
    font-size: 0.9rem;
    line-height: 1.4;
    color: #475569;
  }
  .trait-summary {
    margin-top: 10px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 6px;
    font-size: 0.9rem;
  }
  .trait-summary div {
    padding: 6px 8px;
    border-radius: 8px;
    background: #f8fafc;
  }
  .visual {
    width: 340px;
    flex: 0 0 340px;
    min-width: 260px;
  }
  @media (max-width: 700px) {
    .visual {
      width: 100%;
      order: -1;
    }
  }
</style>
</head>
<body>
  <div class="card">
    <header>
      <h1>ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ â€” E/S/O/C ë¶„ì„</h1>
      <div id="headerControls">
        <select id="langSelect"></select>
        <button class="btn" id="startBtn">ì‹œì‘</button>
      </div>
    </header>

    <main>
      <section class="quiz">
        <!-- âœ… ì‹œì‘ í˜ì´ì§€ -->
        <div id="startBox" class="start-box">
          <p id="introText">
            ì§ˆë¬¸ì— ë‹µí•˜ë©´ E/S/O/C ì„±í–¥ì„ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤.<br>ì–¸ì–´ë¥¼ ì„ íƒí•œ ë’¤ ì‹œì‘í•˜ì„¸ìš”.
          </p>
          <div class="trait-cards">
            <div class="trait E">ğŸ’¬ <strong>E â€” ì™¸í–¥ì„±</strong><small>ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦¬ë©° ì—ë„ˆì§€ë¥¼ ì–»ëŠ” íƒ€ì…</small></div>
            <div class="trait S">âš–ï¸ <strong>S â€” ì•ˆì •ì„±</strong><small>ì°¨ë¶„í•˜ê³  ê· í˜• ì¡íŒ íŒë‹¨ì„ ì¤‘ì‹œí•˜ëŠ” íƒ€ì…</small></div>
            <div class="trait O">ğŸ’¡ <strong>O â€” ê°œë°©ì„±</strong><small>ìƒˆë¡œìš´ ì•„ì´ë””ì–´ì™€ ë³€í™”ë¥¼ ì¦ê¸°ëŠ” íƒ€ì…</small></div>
            <div class="trait C">ğŸ“˜ <strong>C â€” ì„±ì‹¤ì„±</strong><small>ì±…ì„ê° ìˆê³  ê³„íšì ì¸ ì™„ë²½ì£¼ì˜ì</small></div>
          </div>
        </div>

        <!-- ì§ˆë¬¸ ì¹´ë“œ -->
        <div id="questionCard" class="question-card">
          <div class="progress">
            <div id="progressFill" style="height:10px;background:#6366f1;width:0%;border-radius:10px;"></div>
          </div>
          <div id="questionTitle" style="font-weight:bold;"></div>
          <div class="choices" id="choices"></div>
        </div>

        <!-- âœ… ê²°ê³¼ ì¹´ë“œ -->
        <div id="resultCard" class="result-card">
          <h3 id="resultTitle">ê²°ê³¼</h3>
          <p id="resultSummary"></p>
          <div class="result-detail" id="traitDesc"></div>
          <div class="trait-summary">
            <div class="E">ğŸ’¬ E â€” ì™¸í–¥ì„±: í™œë°œí•˜ê³  ë¦¬ë”ì‹­ì´ ê°•í•¨</div>
            <div class="S">âš–ï¸ S â€” ì•ˆì •ì„±: ì°¨ë¶„í•˜ê³  ì‹ ì¤‘í•œ ì„±í–¥</div>
            <div class="O">ğŸ’¡ O â€” ê°œë°©ì„±: í˜¸ê¸°ì‹¬ ë§ê³  ì°½ì˜ì </div>
            <div class="C">ğŸ“˜ C â€” ì„±ì‹¤ì„±: ê¼¼ê¼¼í•˜ê³  ì±…ì„ê°ì´ ê°•í•¨</div>
          </div>
          <div style="margin-top:10px;">
            <button class="btn" id="restartBtn">ë‹¤ì‹œí•˜ê¸°</button>
          </div>
        </div>
      </section>

      <!-- ì°¨íŠ¸ -->
      <aside class="visual">
        <canvas id="resultChart" style="width:100%;height:360px;"></canvas>
      </aside>
    </main>
  </div>

<script>
/* ===== ì§ˆë¬¸ ë°ì´í„° ===== */
const QUESTIONS_BY_LANG = {
  ko: [
    { q: "ì£¼ë§ì— ì¹œêµ¬ë“¤ì´ ì•½ì†ì„ ì¡ì„ ë•Œ, ë‹¹ì‹ ì€ ì–´ë–¤ ë°˜ì‘ì„ ë³´ì´ë‚˜ìš”?",
      c: [["ë¨¼ì € ì°¸ì—¬ ì˜ì‚¬ë¥¼ ë°íŒë‹¤", "E"], ["ì¡°ìš©íˆ ìƒí™©ì„ ì§€ì¼œë³¸ë‹¤", "S"], ["ìƒˆë¡œìš´ í™œë™ì„ ì œì•ˆí•œë‹¤", "O"], ["ì¼ì •ì„ ê¼¼ê¼¼íˆ í™•ì¸í•œë‹¤", "C"]] },
    { q: "ë‚¯ì„  ì‚¬ëŒë“¤ê³¼ ìˆì„ ë•Œ ë‹¹ì‹ ì˜ í–‰ë™ì€?",
      c: [["ë¨¼ì € ë§ì„ ê±´ë‹¤", "E"], ["í•„ìš”í•  ë•Œë§Œ ë§í•œë‹¤", "S"], ["ìƒˆë¡œìš´ ì£¼ì œë¥¼ ì œì‹œí•œë‹¤", "O"], ["ìƒëŒ€ ë°˜ì‘ì„ ì‚´í•€ë‹¤", "C"]] },
    { q: "ìƒˆë¡œìš´ ì¼ì„ ë§¡ê²Œ ë˜ì—ˆì„ ë•Œ ì–´ë–»ê²Œ ì‹œì‘í•˜ë‚˜ìš”?",
      c: [["í˜‘ë ¥í•˜ë©° ì§„í–‰í•œë‹¤", "E"], ["ê³„íšì„ ì„¸ìš´ë‹¤", "C"], ["ì¦‰í¥ì ìœ¼ë¡œ ì‹œë„í•œë‹¤", "O"], ["ì§€ì¹¨ì„ ìˆ™ì§€í•œ í›„ ì§„í–‰í•œë‹¤", "S"]] },
    { q: "ì—¬í–‰ì„ ì¤€ë¹„í•  ë•Œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê²ƒì€?",
      c: [["ëª¨ë‘ê°€ ì¦ê¸¸ ì¼ì •", "E"], ["í¸ì•ˆí•œ ìˆ™ì†Œ", "S"], ["ìƒˆë¡œìš´ ê²½í—˜", "O"], ["ì„¸ë¶€ ê³„íš", "C"]] },
    { q: "ëª¨ì„ì—ì„œ ì˜ê²¬ì´ ë‚˜ë‰  ë•Œ ë‹¹ì‹ ì€?",
      c: [["ë¶„ìœ„ê¸°ë¥¼ ì´ëŒë©° ì¡°ìœ¨í•œë‹¤", "E"], ["ì¡°ìš©íˆ íŒë‹¨í•œë‹¤", "S"], ["ì°½ì˜ì  í•´ê²°ì±…ì„ ì œì‹œí•œë‹¤", "O"], ["ë…¼ë¦¬ì ìœ¼ë¡œ ê·¼ê±°ë¥¼ ì œì‹œí•œë‹¤", "C"]] }
  ]
};

let lang = "ko", qIndex = 0, scores = { E: 0, S: 0, O: 0, C: 0 }, questions = [];
const langSelect = document.getElementById("langSelect"),
  startBtn = document.getElementById("startBtn"),
  headerControls = document.getElementById("headerControls"),
  startBox = document.getElementById("startBox"),
  questionCard = document.getElementById("questionCard"),
  choicesDiv = document.getElementById("choices"),
  questionTitle = document.getElementById("questionTitle"),
  progressFill = document.getElementById("progressFill"),
  resultCard = document.getElementById("resultCard"),
  resultSummary = document.getElementById("resultSummary"),
  traitDesc = document.getElementById("traitDesc"),
  resultChart = document.getElementById("resultChart"),
  restartBtn = document.getElementById("restartBtn");

langSelect.innerHTML = '<option value="ko">í•œêµ­ì–´</option>';
startBtn.onclick = startQuiz;
restartBtn.onclick = () => location.reload();

function startQuiz() {
  // ì‹œì‘ ì‹œ ë²„íŠ¼ê³¼ ì–¸ì–´ ì„ íƒ ìˆ¨ê¸°ê¸°
  headerControls.style.display = "none";
  
  questions = QUESTIONS_BY_LANG[lang];
  qIndex = 0; scores = { E: 0, S: 0, O: 0, C: 0 };
  startBox.style.display = "none";
  questionCard.style.display = "block";
  showQuestion();
}

function showQuestion() {
  const q = questions[qIndex];
  questionTitle.textContent = `(${qIndex + 1}/${questions.length}) ${q.q}`;
  choicesDiv.innerHTML = "";
  q.c.forEach(([text, trait]) => {
    const div = document.createElement("div");
    div.className = "choice";
    div.textContent = text;
    div.onclick = () => { scores[trait]++; nextQ(); };
    choicesDiv.appendChild(div);
  });
  progressFill.style.width = `${(qIndex / questions.length) * 100}%`;
}

function nextQ() {
  qIndex++;
  if (qIndex < questions.length) showQuestion();
  else finishQuiz();
}

function finishQuiz() {
  questionCard.style.display = "none";
  resultCard.style.display = "block";
  progressFill.style.width = "100%";
  const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
  const top = sorted[0][0];
  const typeMap = { E: "ì™¸í–¥í˜• ğŸ’¬", S: "ì•ˆì •í˜• âš–ï¸", O: "ê°œë°©í˜• ğŸ’¡", C: "ì„±ì‹¤í˜• ğŸ“˜" };
  resultSummary.textContent = `ë‹¹ì‹ ì€ ${typeMap[top]} ì„±í–¥ì´ ê°•í•©ë‹ˆë‹¤.`;
  traitDesc.textContent = {
    E: "ì‚¬ëŒë“¤ê³¼ì˜ êµë¥˜ë¥¼ í†µí•´ ì—ë„ˆì§€ë¥¼ ì–»ê³  í™œë°œíˆ í™œë™í•©ë‹ˆë‹¤.",
    S: "ì•ˆì •ê³¼ ì‹ ì¤‘í•¨ì„ ì¤‘ì‹œí•˜ë©° ì°¨ë¶„í•˜ê²Œ í–‰ë™í•©ë‹ˆë‹¤.",
    O: "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ì™€ ê²½í—˜ì„ ì¶”êµ¬í•˜ëŠ” ì°½ì˜ì  ì‚¬ê³ ë¥¼ ê°€ì§‘ë‹ˆë‹¤.",
    C: "ì±…ì„ê° ìˆê³  ê³„íšì ìœ¼ë¡œ ëª©í‘œë¥¼ ë‹¬ì„±í•©ë‹ˆë‹¤."
  }[top];
  drawChart();
}

function drawChart() {
  const ctx = resultChart.getContext("2d");
  new Chart(ctx, {
    type: "radar",
    data: {
      labels: ["E ğŸ’¬", "S âš–ï¸", "O ğŸ’¡", "C ğŸ“˜"],
      datasets: [{
        label: "ë‚˜ì˜ ì„±í–¥",
        data: [scores.E, scores.S, scores.O, scores.C],
        backgroundColor: "rgba(99,102,241,0.2)",
        borderColor: "#6366f1",
        pointBackgroundColor: "#6366f1"
      }]
    },
    options: { scales: { r: { suggestedMin: 0, suggestedMax: 5 } } }
  });
}
</script>
</body>
</html>
