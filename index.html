<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Personality Test — E/S/O/C Analyzer</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  :root {
    --accent: #6366f1;
    --bg-light: linear-gradient(120deg, #eef2ff, #e0e7ff);
  }
  body {
    font-family: Inter, "Noto Sans KR", system-ui;
    background: var(--bg-light);
    margin: 0;
    padding: 20px;
    display: flex;
    justify-content: center;
  }
  .card {
    max-width: 900px;
    width: 100%;
    background: #fff;
    border-radius: 16px;
    padding: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.05);
  }
  header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  header h1 {
    font-size: 1.3rem;
    background: linear-gradient(45deg, #4f46e5, #8b5cf6);
    -webkit-background-clip: text;
    color: transparent;
  }
  .btn {
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 10px;
    padding: 8px 12px;
    cursor: pointer;
  }
  .start-box, .question-card, .result-card {
    border-radius: 12px;
    background: white;
    box-shadow: 0 6px 18px rgba(2,6,23,0.06);
    padding: 16px;
  }
  .question-card, .result-card { display: none; }
  .choices { display: flex; flex-direction: column; gap: 10px; margin-top: 12px; }
  .choice { padding: 10px; border-radius: 8px; background: #f8fafc; cursor: pointer; }
  .choice:hover { background: #eef2ff; }
  .trait-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 14px; }
  .trait { border-radius: 12px; padding: 12px; text-align: center; font-size: 0.9rem; }
  .E { background: #eff6ff; color: #1d4ed8; }
  .S { background: #f0fdf4; color: #15803d; }
  .O { background: #fff7ed; color: #c2410c; }
  .C { background: #f5f3ff; color: #6d28d9; }
  @media (max-width:700px) { body { padding: 10px; } }
</style>
</head>
<body>
<div class="card">
  <header>
    <h1 id="title">심리테스트 — E/S/O/C 분석</h1>
    <div id="headerControls">
      <select id="langSelect"></select>
      <button class="btn" id="startBtn">시작</button>
    </div>
  </header>

  <section id="startBox" class="start-box">
    <p id="introText">언어를 선택하고 시작하세요.</p>
    <div class="trait-cards">
      <div class="trait E">💬 <strong>E — 외향성</strong><br>사람들과 어울리며 에너지를 얻는 타입</div>
      <div class="trait S">⚖️ <strong>S — 안정성</strong><br>차분하고 균형 잡힌 판단을 중시하는 타입</div>
      <div class="trait O">💡 <strong>O — 개방성</strong><br>새로운 아이디어와 변화를 즐기는 타입</div>
      <div class="trait C">📘 <strong>C — 성실성</strong><br>책임감 있고 계획적인 완벽주의자</div>
    </div>
  </section>

  <section id="questionCard" class="question-card">
    <div id="progress" style="height:10px;background:#e5e7eb;border-radius:10px;">
      <div id="progressFill" style="height:10px;width:0;background:#6366f1;border-radius:10px;"></div>
    </div>
    <h3 id="questionTitle"></h3>
    <div class="choices" id="choices"></div>
  </section>

  <section id="resultCard" class="result-card">
    <h3 id="resultTitle"></h3>
    <p id="resultSummary"></p>
    <canvas id="resultChart" style="width:100%;max-height:300px;"></canvas>
    <button class="btn" id="restartBtn">다시하기</button>
  </section>
</div>

<script>
/* ===== 다국어 질문 데이터 ===== */
const DATA = {
  ko: {
    title: "심리테스트 — E/S/O/C 분석",
    intro: "질문에 답하면 E/S/O/C 성향을 분석해 드립니다.",
    start: "시작", again: "다시하기",
    questions: [
      { q: "주말에 친구들이 약속을 잡을 때, 당신은 어떤 반응을 보이나요?",
        c: [["먼저 참여 의사를 밝힌다", "E"], ["조용히 상황을 지켜본다", "S"], ["새로운 활동을 제안한다", "O"], ["일정을 꼼꼼히 확인한다", "C"]] },
      { q: "낯선 사람들과 있을 때 당신의 행동은?",
        c: [["먼저 말을 건다", "E"], ["필요할 때만 말한다", "S"], ["새로운 주제를 제시한다", "O"], ["상대 반응을 살핀다", "C"]] },
      { q: "새로운 일을 맡게 되었을 때 어떻게 시작하나요?",
        c: [["협력하며 진행한다", "E"], ["계획을 세운다", "C"], ["즉흥적으로 시도한다", "O"], ["지침을 숙지한 후 진행한다", "S"]] },
      { q: "여행을 준비할 때 가장 중요하게 생각하는 것은?",
        c: [["모두가 즐길 일정", "E"], ["편안한 숙소", "S"], ["새로운 경험", "O"], ["세부 계획", "C"]] },
      { q: "모임에서 의견이 나뉠 때 당신은?",
        c: [["분위기를 이끌며 조율한다", "E"], ["조용히 판단한다", "S"], ["창의적 해결책을 제시한다", "O"], ["논리적으로 근거를 제시한다", "C"]] }
    ],
    traits: {
      E: "사람들과의 교류를 통해 에너지를 얻고 활발히 활동합니다.",
      S: "안정과 신중함을 중시하며 차분하게 행동합니다.",
      O: "새로운 아이디어와 경험을 추구하는 창의적 사고를 가집니다.",
      C: "책임감 있고 계획적으로 목표를 달성합니다."
    },
    labels: { E: "외향형 💬", S: "안정형 ⚖️", O: "개방형 💡", C: "성실형 📘" }
  },
  en: {
    title: "Personality Test — E/S/O/C Analyzer",
    intro: "Answer a few questions to discover your E/S/O/C personality type.",
    start: "Start", again: "Retry",
    questions: [
      { q: "When friends plan a weekend hangout, how do you react?",
        c: [["Join eagerly", "E"], ["Observe quietly", "S"], ["Suggest something new", "O"], ["Check the schedule first", "C"]] },
      { q: "At a party with strangers, what do you do?",
        c: [["Start talking first", "E"], ["Speak only when needed", "S"], ["Introduce a new topic", "O"], ["Read the room", "C"]] },
      { q: "When you start a new task, what’s your style?",
        c: [["Work with others", "E"], ["Plan first", "C"], ["Jump in creatively", "O"], ["Follow the guide", "S"]] },
      { q: "What matters most when preparing a trip?",
        c: [["Fun for everyone", "E"], ["Comfortable stay", "S"], ["New experiences", "O"], ["Detailed planning", "C"]] },
      { q: "When opinions differ in a group, you...",
        c: [["Mediate the discussion", "E"], ["Stay calm and observe", "S"], ["Propose a creative fix", "O"], ["Back your point logically", "C"]] }
    ],
    traits: {
      E: "You’re energized by social interaction and enjoy being around people.",
      S: "You value calmness, balance, and steady decision-making.",
      O: "You’re curious, imaginative, and open to new experiences.",
      C: "You’re responsible, organized, and goal-oriented."
    },
    labels: { E: "Extrovert 💬", S: "Stable ⚖️", O: "Open 💡", C: "Conscientious 📘" }
  },
  ja: {
    title: "心理テスト — E/S/O/C 分析",
    intro: "いくつかの質問に答えて、あなたの性格傾向を分析します。",
    start: "スタート", again: "もう一度",
    questions: [
      { q: "友達が週末の予定を立てるとき、あなたはどうしますか？",
        c: [["すぐに参加を表明する", "E"], ["静かに様子を見る", "S"], ["新しい提案をする", "O"], ["スケジュールを確認する", "C"]] },
      { q: "知らない人といるとき、あなたの行動は？",
        c: [["自分から話しかける", "E"], ["必要な時だけ話す", "S"], ["新しい話題を出す", "O"], ["相手の反応を見る", "C"]] },
      { q: "新しい仕事を任されたとき、どのように始めますか？",
        c: [["協力して進める", "E"], ["計画を立てる", "C"], ["すぐに試してみる", "O"], ["指示を確認する", "S"]] },
      { q: "旅行の準備で一番大事なのは？",
        c: [["みんなが楽しめる予定", "E"], ["快適な宿泊", "S"], ["新しい体験", "O"], ["細かい計画", "C"]] },
      { q: "意見が分かれたとき、あなたは？",
        c: [["雰囲気をまとめる", "E"], ["静かに判断する", "S"], ["創造的な解決を出す", "O"], ["論理的に説明する", "C"]] }
    ],
    traits: {
      E: "人との交流からエネルギーを得るタイプです。",
      S: "落ち着きと安定を大切にする慎重派です。",
      O: "新しい体験や変化を楽しむ創造的なタイプです。",
      C: "責任感が強く、計画的に物事を進めます。"
    },
    labels: { E: "外向型 💬", S: "安定型 ⚖️", O: "開放型 💡", C: "誠実型 📘" }
  }
};

let lang = "ko", qIndex = 0, scores = {E:0,S:0,O:0,C:0}, questions = [];
const langSelect=document.getElementById("langSelect"),startBtn=document.getElementById("startBtn"),
      startBox=document.getElementById("startBox"),questionCard=document.getElementById("questionCard"),
      choicesDiv=document.getElementById("choices"),questionTitle=document.getElementById("questionTitle"),
      progressFill=document.getElementById("progressFill"),resultCard=document.getElementById("resultCard"),
      resultTitle=document.getElementById("resultTitle"),resultSummary=document.getElementById("resultSummary"),
      resultChart=document.getElementById("resultChart"),restartBtn=document.getElementById("restartBtn"),
      title=document.getElementById("title"),intro=document.getElementById("introText"),
      headerControls=document.getElementById("headerControls");

langSelect.innerHTML = Object.keys(DATA).map(k=>`<option value="${k}">${k.toUpperCase()}</option>`).join("");
langSelect.onchange = e => setLanguage(e.target.value);
startBtn.onclick = startQuiz;
restartBtn.onclick = ()=>location.reload();

function setLanguage(l){
  lang = l;
  const d = DATA[l];
  title.textContent = d.title;
  intro.textContent = d.intro;
  startBtn.textContent = d.start;
  restartBtn.textContent = d.again;
}

setLanguage("ko");

function startQuiz(){
  headerControls.style.display="none";
  startBox.style.display="none";
  questionCard.style.display="block";
  questions = DATA[lang].questions;
  qIndex=0; scores={E:0,S:0,O:0,C:0};
  showQuestion();
}

function showQuestion(){
  const q = questions[qIndex];
  questionTitle.textContent = `${qIndex+1}. ${q.q}`;
  choicesDiv.innerHTML="";
  q.c.forEach(([text,trait])=>{
    const div=document.createElement("div");
    div.className="choice";
    div.textContent=text;
    div.onclick=()=>{scores[trait]++;nextQ();};
    choicesDiv.appendChild(div);
  });
  progressFill.style.width=`${(qIndex/questions.length)*100}%`;
}

function nextQ(){
  qIndex++;
  if(qIndex<questions.length) showQuestion();
  else finishQuiz();
}

function finishQuiz(){
  questionCard.style.display="none";
  resultCard.style.display="block";
  progressFill.style.width="100%";
  const d = DATA[lang], sorted = Object.entries(scores).sort((a,b)=>b[1]-a[1]);
  const top = sorted[0][0];
  resultTitle.textContent = d.labels[top];
  resultSummary.textContent = d.traits[top];
  drawChart();
}

function drawChart(){
  new Chart(resultChart.getContext("2d"),{
    type:"radar",
    data:{
      labels:Object.values(DATA[lang].labels),
      datasets:[{label:"Score",data:[scores.E,scores.S,scores.O,scores.C],
        backgroundColor:"rgba(99,102,241,0.2)",borderColor:"#6366f1"}]
    },
    options:{scales:{r:{suggestedMin:0,suggestedMax:5}}}
  });
}
</script>
</body>
</html>
