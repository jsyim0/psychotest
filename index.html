<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì‹¬ë¦¬í…ŒìŠ¤íŠ¸ (ë‹¤êµ­ì–´ & ê·¸ë˜í”„)</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: "Noto Sans KR", sans-serif;
      background: linear-gradient(135deg, #f0f4ff, #dbe9ff);
      margin: 0;
      padding: 0;
      text-align: center;
      min-height: 100vh;
    }
    #app {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      margin-top: 50px;
    }
    button {
      padding: 12px 24px;
      font-size: 1rem;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin: 10px;
      transition: 0.3s;
      background-color: #4e7df2;
      color: white;
    }
    button:hover {
      background-color: #345edb;
      transform: scale(1.05);
    }
    .choice {
      display: block;
      margin: 10px auto;
      width: 90%;
      background: #f3f6ff;
      border-radius: 10px;
      padding: 10px;
      cursor: pointer;
      transition: 0.3s;
    }
    .choice:hover {
      background: #e0e7ff;
      transform: translateY(-2px);
    }
    #chartContainer {
      display: none; /* âœ… ì‹œì‘ ì‹œ ì°¨íŠ¸ ìˆ¨ê¹€ */
      margin-top: 20px;
    }
    @media (max-width: 480px) {
      body { padding: 10px; }
      #app { padding: 20px; }
      button { font-size: 0.9rem; }
    }
  </style>
</head>
<body>
  <div id="app">
    <h1 id="title">ì‹¬ë¦¬í…ŒìŠ¤íŠ¸</h1>
    <p id="intro">ë‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•ì„ ê°„ë‹¨íˆ ì•Œì•„ë³´ì„¸ìš”!</p>

    <!-- âœ… ë‹¤êµ­ì–´ ë²„íŠ¼ -->
    <div id="langButtons">
      <button onclick="setLanguage('ko')">í•œêµ­ì–´ ğŸ‡°ğŸ‡·</button>
      <button onclick="setLanguage('en')">English ğŸ‡ºğŸ‡¸</button>
      <button onclick="setLanguage('ja')">æ—¥æœ¬èª ğŸ‡¯ğŸ‡µ</button>
      <button onclick="setLanguage('fr')">FranÃ§ais ğŸ‡«ğŸ‡·</button>
      <button onclick="setLanguage('es')">EspaÃ±ol ğŸ‡ªğŸ‡¸</button>
      <button onclick="setLanguage('zh')">ä¸­æ–‡ ğŸ‡¨ğŸ‡³</button>
    </div>

    <button id="startBtn" onclick="startTest()">ì‹œì‘í•˜ê¸°</button>
    <div id="questionContainer"></div>
    <div id="chartContainer">
      <canvas id="resultChart"></canvas>
    </div>
    <p id="resultText"></p>
  </div>

  <script>
    // ===== ë‹¤êµ­ì–´ ì§€ì› =====
    const translations = {
      ko: {
        title: "ì‹¬ë¦¬í…ŒìŠ¤íŠ¸",
        intro: "ë‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•ì„ ê°„ë‹¨íˆ ì•Œì•„ë³´ì„¸ìš”!",
        start: "ì‹œì‘í•˜ê¸°",
        result: "ê²°ê³¼ ë³´ê¸°",
        traits: {
          E: "ì™¸í–¥ì„± (E)",
          S: "ì•ˆì •ì„± (S)",
          O: "ê°œë°©ì„± (O)",
          C: "ì„±ì‹¤ì„± (C)"
        }
      },
      en: {
        title: "Personality Test",
        intro: "Discover your personality type in a few questions!",
        start: "Start",
        result: "View Results",
        traits: {
          E: "Extraversion (E)",
          S: "Stability (S)",
          O: "Openness (O)",
          C: "Conscientiousness (C)"
        }
      },
      ja: {
        title: "æ€§æ ¼è¨ºæ–­ãƒ†ã‚¹ãƒˆ",
        intro: "ã„ãã¤ã‹ã®è³ªå•ã§ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã‚’çŸ¥ã‚ã†ï¼",
        start: "ã‚¹ã‚¿ãƒ¼ãƒˆ",
        result: "çµæœã‚’è¦‹ã‚‹",
        traits: {
          E: "å¤–å‘æ€§ (E)",
          S: "å®‰å®šæ€§ (S)",
          O: "é–‹æ”¾æ€§ (O)",
          C: "èª å®Ÿæ€§ (C)"
        }
      },
      fr: {
        title: "Test de personnalitÃ©",
        intro: "DÃ©couvrez votre type de personnalitÃ© en quelques questions !",
        start: "Commencer",
        result: "Voir le rÃ©sultat",
        traits: {
          E: "Extraversion (E)",
          S: "StabilitÃ© (S)",
          O: "Ouverture (O)",
          C: "Conscience (C)"
        }
      },
      es: {
        title: "Test de personalidad",
        intro: "Descubre tu tipo de personalidad con unas pocas preguntas.",
        start: "Comenzar",
        result: "Ver resultados",
        traits: {
          E: "ExtraversiÃ³n (E)",
          S: "Estabilidad (S)",
          O: "Apertura (O)",
          C: "Responsabilidad (C)"
        }
      },
      zh: {
        title: "æ€§æ ¼æµ‹è¯•",
        intro: "é€šè¿‡å‡ ä¸ªé—®é¢˜æ¥äº†è§£ä½ çš„æ€§æ ¼ç±»å‹ï¼",
        start: "å¼€å§‹",
        result: "æŸ¥çœ‹ç»“æœ",
        traits: {
          E: "å¤–å‘æ€§ (E)",
          S: "ç¨³å®šæ€§ (S)",
          O: "å¼€æ”¾æ€§ (O)",
          C: "å°½è´£æ€§ (C)"
        }
      }
    };

    let currentLang = "ko";
    function setLanguage(lang) {
      currentLang = lang;
      const t = translations[lang];
      document.getElementById("title").textContent = t.title;
      document.getElementById("intro").textContent = t.intro;
      document.getElementById("startBtn").textContent = t.start;
      speakText(t.intro, lang);
    }

    // ===== ìë™ ì–¸ì–´ ê°ì§€ =====
    const userLang = navigator.language.slice(0, 2);
    if (translations[userLang]) setLanguage(userLang);

    // ===== ìŒì„± ì•ˆë‚´ =====
    function speakText(text, lang) {
      const utter = new SpeechSynthesisUtterance(text);
      utter.lang = langMap[lang] || "ko-KR";
      window.speechSynthesis.speak(utter);
    }

    const langMap = {
      ko: "ko-KR", en: "en-US", ja: "ja-JP",
      fr: "fr-FR", es: "es-ES", zh: "zh-CN"
    };

    // ===== ì§ˆë¬¸ =====
    const questions = [
      { text: "ì£¼ë§ì— ì¹œêµ¬ë“¤ì´ ì•½ì†ì„ ì¡ìœ¼ë©´ ë‚˜ëŠ”â€¦", choices: [
        { text: "ì ê·¹ì ìœ¼ë¡œ ë‚˜ì„œì„œ ê³„íšì„ ì§ ë‹¤.", trait: "E" },
        { text: "í¸í•˜ê²Œ ì‰¬ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤.", trait: "S" },
        { text: "ìƒˆë¡œìš´ í™œë™ì„ ì œì•ˆí•œë‹¤.", trait: "O" },
        { text: "ì¼ì •ì„ ê¼¼ê¼¼íˆ í™•ì¸í•œë‹¤.", trait: "C" }
      ]},
      { text: "ë‚¯ì„  ìƒí™©ì—ì„œ ë‚˜ëŠ” ë³´í†µâ€¦", choices: [
        { text: "ë¨¼ì € ëŒ€í™”ë¥¼ ì‹œë„í•œë‹¤.", trait: "E" },
        { text: "ì¡°ìš©íˆ ìƒí™©ì„ ê´€ì°°í•œë‹¤.", trait: "S" },
        { text: "í˜¸ê¸°ì‹¬ì„ ê°€ì§€ê³  íƒìƒ‰í•œë‹¤.", trait: "O" },
        { text: "ë¯¸ë¦¬ ê³„íšì„ ì„¸ìš´ë‹¤.", trait: "C" }
      ]},
      { text: "ë¬¸ì œì— ë¶€ë”ªí˜”ì„ ë•Œ ë‚˜ëŠ”â€¦", choices: [
        { text: "ì‚¬ëŒë“¤ê³¼ ìƒì˜í•œë‹¤.", trait: "E" },
        { text: "ì¹¨ì°©í•˜ê²Œ í•´ê²°ì±…ì„ ì°¾ëŠ”ë‹¤.", trait: "S" },
        { text: "ìƒˆë¡œìš´ ë°©ì‹ì„ ì‹œë„í•œë‹¤.", trait: "O" },
        { text: "ë‹¨ê³„ë³„ë¡œ í•´ê²°í•œë‹¤.", trait: "C" }
      ]},
      { text: "íšŒì˜ì—ì„œ ì˜ê²¬ì„ ë§í•  ë•Œ ë‚˜ëŠ”â€¦", choices: [
        { text: "ë¨¼ì € ì˜ê²¬ì„ ë‚¸ë‹¤.", trait: "E" },
        { text: "íƒ€ì¸ì˜ ë°˜ì‘ì„ ì‚´í•€ë‹¤.", trait: "S" },
        { text: "ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•œë‹¤.", trait: "O" },
        { text: "ë°ì´í„°ë¡œ ë…¼ë¦¬ì ìœ¼ë¡œ ì„¤ëª…í•œë‹¤.", trait: "C" }
      ]},
      { text: "ì—¬í–‰ì„ ê³„íší•  ë•Œ ë‚˜ëŠ”â€¦", choices: [
        { text: "í•¨ê»˜ ì¦ê¸¸ ì‚¬ëŒì„ ì°¾ëŠ”ë‹¤.", trait: "E" },
        { text: "í¸ì•ˆíˆ ì‰´ ìˆ˜ ìˆëŠ” ê³³ì„ ê³ ë¥¸ë‹¤.", trait: "S" },
        { text: "ìƒˆë¡œìš´ ì¥ì†Œë¥¼ íƒí—˜í•œë‹¤.", trait: "O" },
        { text: "ì˜ˆì‚°ê³¼ ì¼ì •ì„ ê¼¼ê¼¼íˆ ì§ ë‹¤.", trait: "C" }
      ]}
    ];

    let current = 0;
    const scores = { E: 0, S: 0, O: 0, C: 0 };

    function startTest() {
      document.getElementById("langButtons").style.display = "none";
      document.getElementById("startBtn").style.display = "none";
      document.getElementById("intro").style.display = "none";
      showQuestion();
    }

    function showQuestion() {
      const q = questions[current];
      if (!q) return showResult();

      const container = document.getElementById("questionContainer");
      container.innerHTML = `<h3>${q.text}</h3>` +
        q.choices.map((c, i) => 
          `<div class='choice' onclick='selectChoice("${c.trait}")'>${c.text}</div>`
        ).join("");

      speakText(q.text, currentLang);
    }

    function selectChoice(trait) {
      scores[trait]++;
      current++;
      showQuestion();
    }

    function showResult() {
      document.getElementById("questionContainer").innerHTML = "";
      const resultText = document.getElementById("resultText");
      const topTrait = Object.entries(scores).sort((a,b)=>b[1]-a[1])[0][0];
      const traitDesc = translations[currentLang].traits[topTrait];
      resultText.textContent = `${translations[currentLang].result}: ${traitDesc}`;

      speakText(resultText.textContent, currentLang);

      // âœ… ì°¨íŠ¸ í‘œì‹œ
      document.getElementById("chartContainer").style.display = "block";
      const ctx = document.getElementById("resultChart");
      new Chart(ctx, {
        type: "radar",
        data: {
          labels: Object.values(translations[currentLang].traits),
          datasets: [{
            label: "Your Personality",
            data: Object.values(scores),
            borderColor: "#4e7df2",
            backgroundColor: "rgba(78,125,242,0.2)",
            borderWidth: 2
          }]
        },
        options: {
          scales: { r: { beginAtZero: true, max: 5 } },
          animation: { duration: 1000 }
        }
      });
    }
  </script>
</body>
</html>
